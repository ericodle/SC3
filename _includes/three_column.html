{% if include.id %}
  {% assign three_column = page[include.id] %}
{% else %}
  {% assign three_column = page.three_column %}
{% endif %}

<div class="three-column__wrapper">
  {% if three_column.title %}
    <h2 class="three-column__title">{{ three_column.title }}</h2>
    <div class="divider-bar"></div> 
  {% endif %}

  <div class="three-column__content">
    {% assign column_count = 0 %} 
    
    {% for column in three_column.columns %}
      {% if column_count == 3 %}
        </div> 
        <div class="three-column__content"> 
        {% assign column_count = 0 %}
      {% endif %}

      <div class="three-column__item">
        <h3 class="three-column__item-title">{{ column.title }}</h3>

        {% if column.image_path %}
          <div class="three-column__item-image">
            <img src="{{ column.image_path | relative_url }}" alt="{{ column.alt | default: '' }}">
          </div>
        {% endif %}

        {% if column.subtitle %}
          <h4 class="three-column__item-subtitle">{{ column.subtitle }}</h4>
        {% endif %}

        {%- for i in (1..10) -%}
          {% capture text_key %}text_{{ i }}{% endcapture %}
          {% if column[text_key] %}
            <p class="three-column__item-text">{{ column[text_key] }}</p>
          {% endif %}
        {%- endfor -%}
      </div>

      {% assign column_count = column_count | plus: 1 %}
    {% endfor %}

  </div> 
</div>
